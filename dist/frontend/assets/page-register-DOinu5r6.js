var $=Object.defineProperty,k=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var S=(s,a,r)=>a in s?$(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,h=(s,a)=>{for(var r in a||(a={}))L.call(a,r)&&S(s,r,a[r]);if(w)for(var r of w(a))U.call(a,r)&&S(s,r,a[r]);return s},p=(s,a)=>k(s,F(a));var E=(s,a,r)=>new Promise((t,i)=>{var j=n=>{try{m(r.next(n))}catch(d){i(d)}},o=n=>{try{m(r.throw(n))}catch(d){i(d)}},m=n=>n.done?t(n.value):Promise.resolve(n.value).then(j,o);m((r=r.apply(s,a)).next())});import{j as e,u as q,r as x,b as I,L as R}from"./react-vendor-DYggY1V5.js";import{a as _,o as z,s as N}from"./vendor-IcH3LwkJ.js";import{a as M,u as V,A as Z}from"./page-forgotpassword-B2MfD6L6.js";/* empty css                       */const T=({password:s})=>{if(!s||s.length===0)return null;const a=M(s),r=[{label:"Mínimo 8 caracteres",met:s.length>=8},{label:"Letra maiúscula",met:/[A-Z]/.test(s)},{label:"Letra minúscula",met:/[a-z]/.test(s)},{label:"Número",met:/[0-9]/.test(s)},{label:"Caractere especial",met:/[!@#$%^&*(),.?":{}|<>]/.test(s)}];return e.jsxs("div",{className:"password-strength-meter",children:[e.jsx("div",{className:"strength-bar-container",children:e.jsx("div",{className:"strength-bar",style:{width:`${a.score/10*100}%`,backgroundColor:a.color}})}),e.jsxs("p",{className:"strength-label",style:{color:a.color},children:["Força da senha: ",a.label]}),e.jsx("div",{className:"requirements-list",children:r.map((t,i)=>e.jsxs("div",{className:`requirement-item ${t.met?"met":""}`,children:[e.jsx("span",{className:"requirement-icon",children:t.met?"✓":"○"}),e.jsx("span",{className:"requirement-label",children:t.label})]},i))})]})},B=z({username:N().min(3,"Username deve ter no mínimo 3 caracteres").max(30,"Username deve ter no máximo 30 caracteres").regex(/^[a-zA-Z0-9_-]+$/,"Username deve conter apenas letras, números, _ e -"),email:N().email("Email inválido").min(1,"Email é obrigatório"),password:N().min(8,"Senha deve ter no mínimo 8 caracteres").regex(/[A-Z]/,"Senha deve conter pelo menos uma letra maiúscula").regex(/[a-z]/,"Senha deve conter pelo menos uma letra minúscula").regex(/[0-9]/,"Senha deve conter pelo menos um número").regex(/[!@#$%^&*(),.?":{}|<>]/,"Senha deve conter pelo menos um caractere especial"),confirmPassword:N()}).refine(s=>s.password===s.confirmPassword,{message:"As senhas não coincidem",path:["confirmPassword"]}),D=()=>{const{register:s}=V(),a=q(),[r,t]=x.useState(null),[i,j]=x.useState(!1),[o,m]=x.useState(!1),[n,d]=x.useState(""),{register:f,handleSubmit:C,formState:{errors:l},watch:P}=I({resolver:_(B)}),y=P("password"),A=c=>E(null,null,function*(){var b,v;t(null),j(!0);try{const u=yield s(c.email,c.password,c.username);d(c.email),m(!0),localStorage.setItem("emailVerificationPending","true"),localStorage.setItem("emailVerificationEmail",c.email)}catch(u){let g="Erro ao criar conta";(b=u.message)!=null&&b.includes("already registered")?g="Este email já está cadastrado":(v=u.message)!=null&&v.includes("Username already exists")?g="Este username já está em uso":u.message&&(g=u.message),t(g)}finally{j(!1)}});return x.useEffect(()=>{if(o){const c=setTimeout(()=>{a("/login")},5e3);return()=>clearTimeout(c)}},[o,a]),o?e.jsx("div",{className:"auth-form-container",children:e.jsxs("div",{className:"success-modal",children:[e.jsx("div",{className:"success-modal-icon",children:e.jsx("span",{className:"material-icons",children:"check_circle"})}),e.jsx("h2",{className:"success-modal-title",children:"Conta criada com sucesso!"}),e.jsx("p",{className:"success-modal-message",children:"Enviamos um email de verificação para:"}),e.jsx("p",{className:"success-modal-email",children:n}),e.jsxs("div",{className:"success-modal-instructions",children:[e.jsxs("div",{className:"instruction-item",children:[e.jsx("span",{className:"material-icons",children:"mail"}),e.jsx("span",{children:"Verifique sua caixa de entrada"})]}),e.jsxs("div",{className:"instruction-item",children:[e.jsx("span",{className:"material-icons",children:"link"}),e.jsx("span",{children:"Clique no link de verificação"})]}),e.jsxs("div",{className:"instruction-item",children:[e.jsx("span",{className:"material-icons",children:"login"}),e.jsx("span",{children:"Faça login após verificar"})]})]}),e.jsx("p",{className:"success-modal-redirect",children:"Redirecionando para login em 5 segundos..."}),e.jsx("button",{onClick:()=>a("/login"),className:"btn-go-to-login",children:"Ir para Login Agora"})]})}):e.jsxs("div",{className:"auth-form-container",children:[e.jsxs("div",{className:"auth-form-header",children:[e.jsx("h2",{className:"auth-form-title",children:"Criar conta"}),e.jsx("p",{className:"auth-form-subtitle",children:"Cadastre-se para ter acesso completo"})]}),e.jsxs("form",{onSubmit:C(A),className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",p(h({id:"username",type:"text"},f("username")),{disabled:i,className:`form-input ${l.username?"form-input-error":""}`,placeholder:"seu_username"})),l.username&&e.jsx("span",{className:"form-error",children:l.username.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",p(h({id:"email",type:"email"},f("email")),{disabled:i,className:`form-input ${l.email?"form-input-error":""}`,placeholder:"seu@email.com"})),l.email&&e.jsx("span",{className:"form-error",children:l.email.message})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Senha"}),e.jsx("input",p(h({id:"password",type:"password"},f("password")),{disabled:i,className:`form-input ${l.password?"form-input-error":""}`,placeholder:"••••••••",autoComplete:"new-password"})),l.password&&e.jsx("span",{className:"form-error",children:l.password.message}),e.jsx(T,{password:y})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirmar Senha"}),e.jsx("input",p(h({id:"confirmPassword",type:"password"},f("confirmPassword")),{disabled:i,className:`form-input ${l.confirmPassword?"form-input-error":""}`,placeholder:"••••••••",autoComplete:"new-password"})),l.confirmPassword&&e.jsx("span",{className:"form-error",children:l.confirmPassword.message})]}),r&&e.jsx("div",{className:"api-error",children:r}),e.jsx("button",{type:"submit",disabled:i,className:"submit-button",children:i?e.jsxs("span",{className:"button-loading",children:[e.jsx("span",{className:"spinner"}),"Criando conta..."]}):"Criar conta"}),e.jsx("div",{className:"form-footer",children:e.jsxs("p",{className:"footer-text",children:["Já tem uma conta?"," ",e.jsx(R,{to:"/login",className:"link-text",children:"Entrar"})]})})]})]})},Q=()=>e.jsxs("div",{className:"auth-page",children:[e.jsx(Z,{}),e.jsxs("div",{className:"auth-page-content",children:[e.jsxs("div",{className:"auth-page-logo",children:[e.jsx("h1",{className:"logo-text",children:"L2 EDUCA"}),e.jsx("p",{className:"logo-subtitle",children:"Plataforma Educacional"})]}),e.jsx("div",{className:"auth-card",children:e.jsx(D,{})})]})]});export{Q as default};
